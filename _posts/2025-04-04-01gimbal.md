---
title: "25.04.04 / 회전 - 짐벌 락(Gimbal Lock)과 사원수(Quaternion)"
excerpt: ""

categories:
  - Programming
  - Game Development
tags:
  - []

toc: true
toc_sticky: true

date: 2025-04-04
last_modified_at: 2025-04-29
use_math: true
---

3D 게임이나 그래픽에서 회전을 구현하는 것은 핵심적인 문제 중 하나다. 흔히 사용되는 오일러 각(Euler angles)은 여러 축(X, Y, Z)의 회전을 순차적으로 적용하기 때문에, 특정 각도에서 축이 겹치면 회전 자유도가 사라지는 문제가 발생한다. 이를 짐벌락이라 하고, 이를 해결하기 위해 유니티는 사원수를 사용한다.

---

**짐벌 락(Gimbal Lock)**

<div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
  <img src="/assets/img/250404_01gimbal/01.png" alt="01" style="max-width: 100%;" />
</div>

오일러 각으로 회전을 표현할 때 특정 축이 다른 축과 겹쳐서(2축이 같은 방향이 되면서) 하나의 회전 축이 기능을 잃어버리는 현상이다.

오일러 각을 사용하면, 회전 연산이 순서에 크게 의존하게 된다. 어떤 각도에서 한 축이 다른 축과 일치하게 되는 경우, 두 축이 동일한 회전 방향이 되어버려서 3축 회전이 아닌 2축 회전이 되는 문제가 발생한다. 예를 들어 비행기 롤(Roll)과 피치(Pitch)를 섞어 돌리는 과정에서, 피치가 90도 근처가 되면 롤 축이 요(Yaw) 축과 거의 일치하는 경우가 생긴다.

이렇게 되면 게임 오브젝트가 예상치 못한 방향으로 회전하거나, 회전 시도 자체가 무시되는 등 비정상적인 동작을 유발하게 된다.

---

**사원수(Quaternion)**

그래서 이러한 짐벌락을 해결하기 위해 유니티는 사원수를 사용한다.

우리가 인스펙터 창에서 보는 Rotate는 오일러 각으로 표시되지만, 이는 단지 편의상 값을 보여주는 형태이고 실제 회전 계산은 사원수로 처리된다.

사원수란 4차원 복소수를 말하는 것으로, 일반적으로 실수부 w와 3차원 벡터부 x, y, z로 구성된다. 다음과 같은 형태로 표현할 수 있다.

$\mathbf{q} = w + x\mathbf{i} + y\mathbf{j} + z\mathbf{k}$

쉽게 생각하자면 어떤 회전에 대해 X->Y->Z 순으로 회전을 시도하는 게 아닌, 4차원 축 w에 대해 회전을 하는 방식이다. 이렇게 하면 특정 각도에서 축이 겹치지 않게 되고, 위에서 언급한 짐벌 락 현상을 피할 수 있다.

사원수를 이용한 회전은 연속적이고 부드럽게 취급할 수 있어, 카메라 회전/캐릭터 회전 등의 구현에서 유리하게 작용한다. 또한 보간(Interpolation)이 용이해 Lerp, Slerp(Spherical Linear Interpolation)을 통해 두 회전 상태 사이를 자연스럽게 애니메이션 할 수 있다. 4D로 회전을 표현하기 때문에, 단순한 각도 보간보다 회전 자체를 더 직관적으로 보간할 수 있는 것이다.

다만 내부 구현, 즉 사원수의 연산(곱셉, 회전 연산 등)은 오일러 각 대비 수학적으로 직관성이 떨어질 수 있다. 그래서 유니티는 Quaternion.Euler( ) 같은 메소드를 제공해 사용자가 필요할 때만 오일러 각 <-> 사원수 변환을 쉽게 할 수 있도록 한다.

---

정리하자면, 사원수는 4차원 수 체계로서 3D 회전 연산을 효과적으로 처리하기 위해 주로 활용되며, 오일러 각이나 회전 행렬 등으로 회전을 표현하는 것보다 연산적/수치적 이점이 많다.
