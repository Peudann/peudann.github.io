---
title: "25.05.12 / 반사 벡터(Reflection Vector), 미끄럼 벡터(Sliding Vector)"
excerpt: ""

categories:
  - Programming
  - Game Development
tags:
  - []

toc: true
toc_sticky: true
use_math: true

date: 2025-05-12
last_modified_at: 2025-05-13
---

게임 개발에서 **반사 벡터(Reflection Vector)**와 **미끄럼 벡터(Sliding Vector)**는 주로 **물리 충돌, 충돌 반응, 이동 처리** 등에 사용되는 중요한 개념이다. 간단히 요약하면,

1. **반사 벡터**: 어떠한 표면에 물체(또는 레이)가 부딪혀 튕겨져 나가는 방향
2. **미끄럼 벡터**: 어떤 표면 위에서 미끄러지듯 움질일 때의 이동 방향(표면의 접선 방향)     

아래에서 수학적으로 어떻게 구하고, 왜 중요한지 알아보자.

---

### **1\. 반사 벡터(Reflection Vector)**

**1) 개념**
- 물체가 벽이나 바닥 등에 충돌했을 때, 또는 레이가 거울 표면에 반사되는 상황에서, **"입사 벡터가 표면 법선과 이루는 각도"**에 따라 반사 벡터가 결정된다.
- 물리 엔진이나 광원/라이팅, 셰이더(거울, 유리 반사) 구현에서 많이 쓰인다.

**2) 반사 벡터 공식**
- 일반적으로 **입사 벡터** $ \mathbf I $ 와 **표면의 법선 벡터** $ \mathbf N $ 이 주어졌을 때, **반사 벡터** $ \mathbf R $ 은 다음과 같이 계산된다.

$ \mathbf{R} = \mathbf{I} - 2 \bigl(\mathbf{I} \cdot \mathbf{N}\bigr) \mathbf{N} $

- $ \mathbf I $ : 표면에 충돌하기 **직전**의 방향(또는 속도) 벡터. 보통 정규화(Normalized)된 상태로 쓴다.
- $ \mathbf N $ : 충돌 지점에서의 법선 벡터 (정규화)
- $ \mathbf R $ : 반사된 방향(또는 속도) 벡터    

예시
- 레이캐스팅(Ray Casting)에서 광선이 반사되는 각도
- 물리 엔진에서 탄환이 벽에 부딪혀 튕길 때, 속도 벡터를 재계산    

**3) 왜 중요한가?**

1. **광학(렌더링)**
  - 거울 반사, 금속 반사 등 물리 기반 렌더링(PBR)에서 필수적

2. **물리 시뮬레이션**
  - 공 튕김, 총알 반사 등

3. **게임플레이 연출**
  - 레이저 광선 퍼즐(거울 반사), 탄환 튕기기 등

---

### **2\. 미끄럼 벡터(Sliding Vector)**

**1) 개념**
- 어떤 오브젝트(캐릭터 등)가 표면(벽, 바닥, 경사면)에 부딪힐 때, **정확히 그 표면 위에서만 움직이도록** 하는 벡터이다.
- 가장 흔한 예: 캐릭터가 벽에 부딪히면, 앞으로 가지 못하지만 벽을 타고 "옆으로 미끄러지는" 상황    

**2) 미끄럼 벡터 공식**

어떤 속도(또는 이동) 벡터 $ \mathbf V $ 가 있고, 표면 법선 벡터 $ \mathbf N $ 이 있을 때, **표면에 수직인 방향**을 제거하면, 나머지 **표면의 접선 방향**만 남게 된다. 이를 수학적으로 표현하면 다음과 같다.      

$ \mathbf{V}_{\text{slide}} = \mathbf{V} - (\mathbf{V} \cdot \mathbf{N}) \mathbf{N} $

- $ \mathbf V $ : 물체가 움직이려는 원래의 방향(또는 속도)
- $ \mathbf N $ : 충돌 표면의 법선 벡터(정규화)
- $ \mathbf{V}_{\text{slide}} $ : 표면에 대해 **수직 성분**이 제거된, 즉 **접선(Tangent) 성분**만 남은 이동 벡터

> 주의
  - 실제로는 충돌 깊이나 마찰(Friction) 등에 따라 여러 보정이 들어갈 수 있다.
  - 표면이 경사면이라면, 캐릭터가 경사 위에서 아래로 **굴러 떨어지는 상황**을 구현할 때 추가적인 중력 방향 프로젝션/조정도 고려한다.

**3) 왜 중요한가?**

1. **캐릭터 이동 및 충돌 처리**
  - FPS/TPS 게임에서 벽에 부딪힌 캐릭터가 "벽을 타고 슬라이드"할 때
  - 경사면 위에서 "미끄러지는" 동작

2. **물리 시뮬레이션(마찰)**
  - 상자가 경사면 위에서 미끄러지거나, 구체가 벽면을 타고 이동

3. **카메라 충돌**
  - 3인칭 카메라가 벽과 충돌했을 때, 벽을 타고 부드럽게 위치가 조정되는 등의 로직에서도 쓸 수 있음

---

### **3\. 요약**

1. **반사 벡터**
  - "입사" 방향과 "법선"을 기반으로, 물체(광선 등)가 표면에 부딪혀 "어떻게 튕겨 나가느냐"를 결정
  - 공식:  $ \mathbf{R} = \mathbf{I} - 2 \bigl(\mathbf{I} \cdot \mathbf{N}\bigr) \mathbf{N} $
  - 충돌 반응, 광학 효과, 물리 시뮬레이션 등 다양한 곳에서 사용

2. **미끄럼 벡터**
  - 표면에 충돌했을 때, "수직(법선) 방향" 이동은 막고, "접선 방향"으로만 이동/슬라이드하게 하는 벡터
  - 공식: $ \mathbf{V}_{\text{slide}} = \mathbf{V} - (\mathbf{V} \cdot \mathbf{N}) \mathbf{N} $
  - 캐릭터 벽 슬라이딩, 경사면 미끄러짐, 카메라 충돌 처리 등에 사용
  
