---
title: "25.04.18 / 컬링(Culling)을 통한 최적화"
excerpt: ""

categories:
  - Programming
  - Game Development
tags:
  - []

toc: true
toc_sticky: true

date: 2025-04-18
last_modified_at: 2025-04-29
---

유니티에서 말하는 카메라 컬링(Culling)이란, 카메라에 의해 그려져야 할 객체와 그렇지 않은 객체를 효율적으로 분류(제거)하는 과정을 의미한다. 게임 씬 내에서 모든 객체가 매 프레임마다 그려지면 성능적으로 매우 비효율적이므로, 실제로 화면에 보이거나 표시가 필요한 객체만 렌더링하여 퍼포먼스를 최적화한다.

---

**컬링의 주요 기능과 특징**

1.  렌더링 성능 향상
    - 씬에 존재하는 모든 객체를 매번 그리는 것이 아니라, 현재 카메라에 보이지 않는 객체들은 렌더링 대상에서 제외시킨다. 이는  CPU/GPU의 부담을 줄여, 프레임 레이트 개선 및 메모리 절감을 가능하게 만든다.
2.  자동 처리와 설정 가능
    - 유니티에서 제공하는 다양한 컬링 기법은 대부분 자동으로 동작하지만, 개발자가 추가로 세분화하거나 직접 제어할 수 있는 설정(예: Layer 기반 Culling Mask, Occlusion 데이터 베이크 등)을 제공하낟.
3.  Culling 방식별 차이
    - 카메라의 시야 범위(Frustum)에 기반한 단순 "시야 밖" 제거부터, 복잡한 구조물을 통과하지 않는 객체만 그리는 고급 Occlusion Culling까지 여러 방식이 있다. 프로젝트 규모와 요구 사항에 따라 적절한 기법을 선택하거나 병행해서 사용할 수 있다.
4.  LOD(Level of Detail)와 연계
    - 컬링은 종종 LOD 시스템과 함께 사용되어, 거리에 따라 메쉬 디테일이나 텍스처 해상도를 줄이는 등의 최적화와 함께 시야 밖 객체 제거를 수행하여 더욱 효율적인 렌더링을 구현한다.

---

**유니티에서 사용되는 대표적인 컬링 기법**

**Frustum Culling**

- 개념:
  - 카메라 시야(FOV: Field of View)를 3D 공간에서 육면체 형태의 뷰 프러스텀(View Frustum)으로 단순화 했을 때, 그 경계 밖에 있는 객체는 그려지지 않도록 하는 방식이다.
- 특징:
  1.  유니티 엔진에서 기본적으로 항상 적용된다.
  2.  최전방, 후방 평면(Near, Far Plane)과 카메라 시야 각도에 맞춰 자동 계산하므로 비교적 연산 비용이 낮다.
  3.  뷰 프러스텀 밖으로 완전히 벗어난 오브젝트만 컬링 대상이 되므로, 단순하고 빠르지만, 그 이상의 카메라 뒤에 가려져 있는 상황까지는 고려하지 못한다.

**Occlusion Culling**

- 개념:
  - 카메라 시야 안에 있을 수 있지만, 다른 오브젝트나 지형 등에 가려져서 보이지 않는 오브젝트를 렌더링하지 않도록 하는 방식이다. 유니티에서는 Umbra(엔진 내부 통합 툴)를 사용하여 Occlusion Culling 기능을 제공한다.
- 특징:
  1.  Frustum Culling보다 좀 더 진보된 형태로, 실제로 가려져 보이지 않는 객체까지 렌더링을 제외해 성능을 한 층 더 올릴 수 있다.
  2.  설정 과정으로 Occlusion Area를 지정하거나, 베이크(Bake) 과정을 통해 건물 내부 등 가려지는 영역 정보를 미리 계산해야 한다.
  3.  씬 구조가 복잡하거나 많은 오브젝트가 존재하는 환경에서 큰 효과를 볼 수 있으나, Occlusion 베이크나 런타임 계산에 일정 비용이 소요될 수 있다.
  4.  Static으로 설정된 오브젝트(움직이지 않는 게임 오브젝트)에 대해서 가장 효과적이다.
  5.  애니메이션 또는 이동하는 객체는 특정 조건에서 Dynamic Occlusion이 적용되지만, 상황에 따라 추가 최적화나 트릭이 필요할 수 있다.

**Layer Culling(Culling Mask)**

- 개념:
  - 카메라는 특정 레이어에 속한 오브젝트만 렌더링하도록 Culling Mask를 설정할 수 있다. 예를 들어 UI 전용 카메라와 게임 월드 전용 카메라를 분리하거나, 디버그용 카메라를 따로 운용하는 식이다.
- 특징:
  1.  카메라의 Inspector에서 Culling Mask 항목을 통해 표시할 레이어(또는 숨길 레이어)를 직접 지정할 수 있다.
  2.  간단하면서도 강력한 방식으로, 원하는 카메라마다 렌더링 대상 그룹을 명확하게 구분할 수 있다.
  3.  씬 뷰(Scene View)에서도 원하는 레이어만 보이도록 설정해 작업 효율을 높일 수 있다.

---

**그 밖의 관련된 컬링 개념**

1.  Bounding Volume Culling
    - 오브젝트마다 설정되는 바운딩 볼륨에 대해서 카메라와의 충돌 판정을 하여, "보일 가능성이 있는지"를 빠르게 거르기 위한 단순 충돌 검사 기범이다. 유니티가 내부적으로 Frustum Culling 시에 자동으로 활용한다.
2.  LOD Culling
    - LOD가 적용된 상태에서, 가장 낮은 레벨의 LOD보다 더 먼 거리에 위치하면 아예 그리지 않는(드로우콜 제거) 식으로 추가적인 성능 최적화를 할 수 있다.
3.  Dynamic Batching / GPU Instancing과의 시너지
    - 컬링으로 불필요한 객체를 제거함과 동시에, 실제로 그리는 오브젝트에 대해서는 드로우콜을 묶어서 처리하거나 GPU Instancing을 사용해 한 번에 여러 객체를 그리는 방식을 취하면 추가적으로 GPU 성능을 높일 수 있다.
4.  Scriptable Render Pipeline (URP/HDRP)에서의 컬링
    - 기존의 Built-In Render Pipeline뿐만 아니라, URP와 HDRP에서도 컬링은 비슷한 원리로 작동한다.
    - SRP(RenderPipelineManager)와 함께 직접 컬링을 조작하거나 파이프라인을 커스텀하여 더욱 세밀하게 최적화할 수도 있다.

---

실제 적용 시 주의할 점

1.  Occlusion 베이크 설정
    - Occlusion Culling을 제대로 사용하려면 씬 구조에 맞춘 셀(Cell) 설정, Occlusion 영역 구분이 정확해야 한다. 불필요하거나 잘못된 베이크 설정은 시야에 보여야 하는 객체가 사라지거나, 제대로 최적화되지 않는 상황을 초래할 수 있다.
2.  정적/동적 객체 구분
    - Static으로 설정된 오브젝트와 Dynamic 객체가 섞여 있는 복잡한 씬에서는, Occlusion과 LOD 시스템이 제대로 동작하도록 적절한 레이어 분배 및 Static 설정을 해 주어야 한다.
3.  디버그 뷰와 Profiler 사용
    - 유니티 내 Occlusion Culling 창(Occlusion > Culling)에서 확인 모드를 사용하거나, Scene 뷰의 Camera Preview, Occlusion Visualization 등을 통해 실제로 컬링이 이루어지는 상태를 시각적으로 확인 가능하다.
    - Profiler에서 Camera.Render 항목 등을 보면서, 컬링 최적화가 잘 적용되는지 수치적으로 확인해야 하낟.
4.  레이어 관리
    - 프로젝트가 커지면 레이어 종류가 많아지는 경향이 있는데, 각 카메라별로 불필요한 레이어는 제외함으로써 드로우콜과 쉐이더 연산을 줄일 수 있다.

---

<div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
  <img src="/assets/img/250418_01culling/01.png" alt="01" style="max-width: 100%;" />
</div>

유니티의 카메라 컬링은 성능 최적화를 위해 필수적으로 이해하고 활용해야 하는 핵심 기술이다. 기본적으로 Frustum Culling이 자동 적용되며, 프로젝트 규모나 지형/건물의 복잡도에 따라 Occlusion Culling을 병행해 시야 밖이거나 가려진 객체를 효율적으로 제거할 수 있다. 또한 Culling Mask를 통해 레이어별로 렌더링 여부를 관리하거나, LOD 시스템 및 다른 최적화 기법과 조합해 성능을 극대화하게 된다. 각각의 컬링 방식별로 설정과 원리를 명확히 이해하면, 실무에서 퍼포먼스 병목 구간을 줄이고 쾌적한 환경을 제공할 수 있다.
